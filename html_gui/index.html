<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <script type="module">
        import init, { Assembler, set_panic_hook } from '/static/jsm/assembler/assembler_dev.js';

        async function run() {

            let wasm  = await init();

            set_panic_hook();

            let test = new Assembler();
            let ptr = test.assemble(`
            STA $FF
            label:
            STA %label
            STA hi label
            STA lo label
            `);

            if (ptr !== 0) {
                let output = new Uint8Array(wasm.memory.buffer, ptr, 30);
                let hexData = [];
                for (let b of output) hexData.push(
                    b.toString(16).padStart(2, "0").toUpperCase())
                ;

                console.table(hexData);
            } else {
                alert("JS: parse err");
            }

        }

        run();
    </script>

</head>
<body>

</body>
</html>